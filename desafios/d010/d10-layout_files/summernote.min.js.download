!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(window.jQuery)}((function(e){Array.prototype.reduce||(Array.prototype.reduce=function(e){var t,n=Object(this),o=n.length>>>0,i=0;if(2===arguments.length)t=arguments[1];else{for(;i<o&&!(i in n);)i++;if(i>=o)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;i<o;i++)i in n&&(t=e(t,n[i],i,n));return t}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(e){for(var t=Object(this),n=t.length>>>0,o=[],i=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in t){var a=t[r];e.call(i,a,r,t)&&o.push(a)}return o}),Array.prototype.map||(Array.prototype.map=function(e,t){var n,o,i;if(null===this)throw new TypeError(" this is null or not defined");var r=Object(this),a=r.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),o=new Array(a),i=0;i<a;){var s,l;i in r&&(s=r[i],l=e.call(n,s,i,r),o[i]=l),i++}return o});var t,n="function"==typeof define&&define.amd,o=navigator.userAgent,i=/MSIE|Trident/i.test(o);if(i){var r=/MSIE (\d+[.]\d+)/.exec(o);r&&(t=parseFloat(r[1])),(r=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(o))&&(t=parseFloat(r[1]))}var a,s,l,d,c,u,f,h,p,v,g,m,b,y,C,k,x,w,T,N,P,S,L,E,F,I,M,R,A,D,H,B,z,U,O,j,K,V,q,W,_,Z,G,Y,Q,J,X,$,ee,te,ne,oe,ie={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:i,isFF:/firefox/i.test(o),isWebkit:/webkit/i.test(o),isSafari:/safari/i.test(o),browserVersion:t,jqueryVersion:parseFloat(e.fn.jquery),isSupportAmd:n,hasCodeMirror:n?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:function(t){var n="Comic Sans MS"===t?"Courier New":"Comic Sans MS",o=e("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),i=o.css("fontFamily",n).width(),r=o.css("fontFamily",t+","+n).width();return o.remove(),i!==r},isW3CRangeSupport:!!document.createRange},re=(a=0,{eq:function(e){return function(t){return e===t}},eq2:function(e,t){return e===t},peq2:function(e){return function(t,n){return t[e]===n[e]}},ok:function(){return!0},fail:function(){return!1},self:function(e){return e},not:function(e){return function(){return!e.apply(e,arguments)}},and:function(e,t){return function(n){return e(n)&&t(n)}},uniqueId:function(e){var t=++a+"";return e?e+t:t},rect2bnd:function(t){var n=e(document),o={top:t.top+n.scrollTop(),left:t.left+n.scrollLeft(),width:t.right-t.left,height:t.bottom-t.top};return o.left+350>e(window).width()&&(o.left=o.left-t.width-100,o.width=t.width),o.top+120>e(window).height()&&(o.top=o.top-o.height-120),o},invertObject:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t},namespaceToCamel:function(e,t){return(t=t||"")+e.split(".").map((function(e){return e.substring(0,1).toUpperCase()+e.substring(1)})).join("")}}),ae=(c=function(t,n){return e.inArray(n,t)},{head:s=function(e){return e[0]},last:l=function(e){return e[e.length-1]},initial:function(e){return e.slice(0,e.length-1)},tail:d=function(e){return e.slice(1)},prev:function(e,t){var n=c(e,t);return-1===n?null:e[n-1]},next:function(e,t){var n=c(e,t);return-1===n?null:e[n+1]},find:function(e,t){for(var n=0,o=e.length;n<o;n++){var i=e[n];if(t(i))return i}},contains:u=function(e,t){return-1!==c(e,t)},all:function(e,t){for(var n=0,o=e.length;n<o;n++)if(!t(e[n]))return!1;return!0},sum:function(e,t){return t=t||re.self,e.reduce((function(e,n){return e+t(n)}),0)},from:function(e){for(var t=[],n=-1,o=e.length;++n<o;)t[n]=e[n];return t},clusterBy:function(e,t){return e.length?d(e).reduce((function(e,n){var o=l(e);return t(l(o),n)?o[o.length]=n:e[e.length]=[n],e}),[[s(e)]]):[]},compact:function(e){for(var t=[],n=0,o=e.length;n<o;n++)e[n]&&t.push(e[n]);return t},unique:function(e){for(var t=[],n=0,o=e.length;n<o;n++)u(t,e[n])||t.push(e[n]);return t}}),se=String.fromCharCode(160),le=(f=function(t){return t&&e(t).hasClass("note-editable")},h=function(t){var n;if(t.hasClass("note-air-editor")){var o=ae.last(t.attr("id").split("-"));return{editor:function(){return t},holder:function(){return t.data("holder")},editable:function(){return t},popover:(n=function(t){return function(){return e(t+o)}})("#note-popover-"),handle:n("#note-handle-"),dialog:n("#note-dialog-")}}n=function(e,n){return n=n||t,function(){return n.find(e)}};var i=t.data("options"),r=i&&i.dialogsInBody?e(document.body):null;return{editor:function(){return t},holder:function(){return t.data("holder")},dropzone:n(".note-dropzone"),toolbar:n(".note-toolbar"),editable:n(".note-editable"),codable:n(".note-codable"),statusbar:n(".note-statusbar"),popover:n(".note-popover"),handle:n(".note-handle"),dialog:n(".note-dialog",r)}},v=function(e){return e&&3===e.nodeType},g=function(e){return e&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(e.nodeName.toUpperCase())},m=function(e){return!f(e)&&e&&/^DIV|^P|^LI|^H[1-7]/.test(e.nodeName.toUpperCase())},b=(p=function(e){return e=e.toUpperCase(),function(t){return t&&t.nodeName.toUpperCase()===e}})("LI"),y=p("TABLE"),C=function(e){return!(N(e)||k(e)||x(e)||m(e)||y(e)||T(e))},k=function(e){return e&&/^UL|^OL/.test(e.nodeName.toUpperCase())},x=p("HR"),w=function(e){return e&&/^TD|^TH/.test(e.nodeName.toUpperCase())},T=p("BLOCKQUOTE"),N=function(e){return w(e)||T(e)||f(e)},P=p("A"),S=p("BODY"),L=ie.isMSIE&&ie.browserVersion<11?"&nbsp;":"<br>",E=function(e){return v(e)?e.nodeValue.length:e.childNodes.length},F=function(e){var t=E(e);return 0===t||!v(e)&&1===t&&e.innerHTML===L||!(!ae.all(e.childNodes,v)||""!==e.innerHTML)},I=function(e){g(e)||E(e)||(e.innerHTML=L)},M=function(e,t){for(;e;){if(t(e))return e;if(f(e))break;e=e.parentNode}return null},R=function(e,t){t=t||re.fail;var n=[];return M(e,(function(e){return f(e)||n.push(e),t(e)})),n},A=function(e,t){t=t||re.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.nextSibling;return n},D=function(e,t){var n=t.nextSibling,o=t.parentNode;return n?o.insertBefore(e,n):o.appendChild(e),e},H=function(t,n){return e.each(n,(function(e,n){t.appendChild(n)})),t},B=function(e){return 0===e.offset},z=function(e){return e.offset===E(e.node)},U=function(e){return B(e)||z(e)},O=function(e,t){for(;e&&e!==t;){if(0!==K(e))return!1;e=e.parentNode}return!0},j=function(e,t){for(;e&&e!==t;){if(K(e)!==E(e.parentNode)-1)return!1;e=e.parentNode}return!0},K=function(e){for(var t=0;e=e.previousSibling;)t+=1;return t},V=function(e){return!!(e&&e.childNodes&&e.childNodes.length)},q=function(e,t){var n,o;if(0===e.offset){if(f(e.node))return null;n=e.node.parentNode,o=K(e.node)}else V(e.node)?(n=e.node.childNodes[e.offset-1],o=E(n)):(n=e.node,o=t?0:e.offset-1);return{node:n,offset:o}},W=function(e,t){var n,o;if(E(e.node)===e.offset){if(f(e.node))return null;n=e.node.parentNode,o=K(e.node)+1}else V(e.node)?(n=e.node.childNodes[e.offset],o=0):(n=e.node,o=t?E(e.node):e.offset+1);return{node:n,offset:o}},_=function(e,t){return e.node===t.node&&e.offset===t.offset},Z=function(e,t){var n=t&&t.isSkipPaddingBlankHTML,o=t&&t.isNotSplitEdgePoint;if(U(e)&&(v(e.node)||o)){if(B(e))return e.node;if(z(e))return e.node.nextSibling}if(v(e.node))return e.node.splitText(e.offset);var i=e.node.childNodes[e.offset],r=D(e.node.cloneNode(!1),e.node);return H(r,A(i)),n||(I(e.node),I(r)),r},G=function(e,t,n){var o=R(t.node,re.eq(e));return o.length?1===o.length?Z(t,n):o.reduce((function(e,o){return e===t.node&&(e=Z(t,n)),Z({node:o,offset:e?le.position(e):E(o)},n)})):null},Y=function(e){return document.createElement(e)},Q=function(e,t){if(e&&e.parentNode){if(e.removeNode)return e.removeNode(t);var n=e.parentNode;if(!t){var o,i,r=[];for(o=0,i=e.childNodes.length;o<i;o++)r.push(e.childNodes[o]);for(o=0,i=r.length;o<i;o++)n.insertBefore(r[o],e)}n.removeChild(e)}},J=p("TEXTAREA"),X=function(e,t){var n=J(e[0])?e.val():e.html();return t?n.replace(/[\n\r]/g,""):n},{NBSP_CHAR:se,ZERO_WIDTH_NBSP_CHAR:"\ufeff",blank:L,emptyPara:"<p>"+L+"</p>",makePredByNodeName:p,isEditable:f,isControlSizing:function(t){return t&&e(t).hasClass("note-control-sizing")},buildLayoutInfo:h,makeLayoutInfo:function(t){var n,o=e(t).closest(".note-editor, .note-air-editor, .note-air-layout");return o.length?(n=o.is(".note-editor, .note-air-editor")?o:e("#note-editor-"+ae.last(o.attr("id").split("-"))),h(n)):null},isText:v,isVoid:g,isPara:m,isPurePara:function(e){return m(e)&&!b(e)},isInline:C,isBlock:re.not(C),isBodyInline:function(e){return C(e)&&!M(e,m)},isBody:S,isParaInline:function(e){return C(e)&&!!M(e,m)},isList:k,isTable:y,isCell:w,isBlockquote:T,isBodyContainer:N,isAnchor:P,isDiv:p("DIV"),isLi:b,isBR:p("BR"),isSpan:p("SPAN"),isB:p("B"),isU:p("U"),isS:p("S"),isI:p("I"),isImg:p("IMG"),isTextarea:J,isEmpty:F,isEmptyAnchor:re.and(P,F),isClosestSibling:function(e,t){return e.nextSibling===t||e.previousSibling===t},withClosestSiblings:function(e,t){t=t||re.ok;var n=[];return e.previousSibling&&t(e.previousSibling)&&n.push(e.previousSibling),n.push(e),e.nextSibling&&t(e.nextSibling)&&n.push(e.nextSibling),n},nodeLength:E,isLeftEdgePoint:B,isRightEdgePoint:z,isEdgePoint:U,isLeftEdgeOf:O,isRightEdgeOf:j,isLeftEdgePointOf:function(e,t){return B(e)&&O(e.node,t)},isRightEdgePointOf:function(e,t){return z(e)&&j(e.node,t)},prevPoint:q,nextPoint:W,isSamePoint:_,isVisiblePoint:function(e){if(v(e.node)||!V(e.node)||F(e.node))return!0;var t=e.node.childNodes[e.offset-1],n=e.node.childNodes[e.offset];return!(t&&!g(t)||n&&!g(n))},prevPointUntil:function(e,t){for(;e;){if(t(e))return e;e=q(e)}return null},nextPointUntil:function(e,t){for(;e;){if(t(e))return e;e=W(e)}return null},isCharPoint:function(e){if(!v(e.node))return!1;var t=e.node.nodeValue.charAt(e.offset-1);return t&&" "!==t&&t!==se},walkPoint:function(e,t,n,o){for(var i=e;i&&(n(i),!_(i,t));){var r=o&&e.node!==i.node&&t.node!==i.node;i=W(i,r)}},ancestor:M,singleChildAncestor:function(e,t){for(e=e.parentNode;e&&1===E(e);){if(t(e))return e;if(f(e))break;e=e.parentNode}return null},listAncestor:R,lastAncestor:function(e,t){var n=R(e);return ae.last(n.filter(t))},listNext:A,listPrev:function(e,t){t=t||re.fail;for(var n=[];e&&!t(e);)n.push(e),e=e.previousSibling;return n},listDescendant:function(e,t){var n=[];return t=t||re.ok,function o(i){e!==i&&t(i)&&n.push(i);for(var r=0,a=i.childNodes.length;r<a;r++)o(i.childNodes[r])}(e),n},commonAncestor:function(t,n){for(var o=R(t),i=n;i;i=i.parentNode)if(e.inArray(i,o)>-1)return i;return null},wrap:function(t,n){var o=t.parentNode,i=e("<"+n+">")[0];return o.insertBefore(i,t),i.appendChild(t),i},insertAfter:D,appendChildNodes:H,position:K,hasChildren:V,makeOffsetPath:function(e,t){return R(t,re.eq(e)).map(K).reverse()},fromOffsetPath:function(e,t){for(var n=e,o=0,i=t.length;o<i;o++)n=n.childNodes.length<=t[o]?n.childNodes[n.childNodes.length-1]:n.childNodes[t[o]];return n},splitTree:G,splitPoint:function(e,t){var n,o,i=t?m:N,r=R(e.node,i),a=ae.last(r)||e.node;i(a)?(n=r[r.length-2],o=a):o=(n=a).parentNode;var s=n&&G(n,e,{isSkipPaddingBlankHTML:t,isNotSplitEdgePoint:t});return s||o!==e.node||(s=e.node.childNodes[e.offset]),{rightNode:s,container:o}},create:Y,createText:function(e){return document.createTextNode(e)},remove:Q,removeWhile:function(e,t){for(;e&&!f(e)&&t(e);){var n=e.parentNode;Q(e),e=n}},replace:function(e,t){if(e.nodeName.toUpperCase()===t.toUpperCase())return e;var n=Y(t);return e.style.cssText&&(n.style.cssText=e.style.cssText),H(n,ae.from(e.childNodes)),D(n,e),Q(e),n},html:function(t,n){var o=X(t);return n&&(o=o.replace(/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g,(function(e,t,n){n=n.toUpperCase();var o=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(n)&&!!t,i=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(n);return e+(o||i?"\n":"")})),o=e.trim(o)),o},value:X}),de=($=function(e,t){var n,o,i=e.parentElement(),r=document.body.createTextRange(),a=ae.from(i.childNodes);for(n=0;n<a.length;n++)if(!le.isText(a[n])){if(r.moveToElementText(a[n]),r.compareEndPoints("StartToStart",e)>=0)break;o=a[n]}if(0!==n&&le.isText(a[n-1])){var s=document.body.createTextRange(),l=null;s.moveToElementText(o||i),s.collapse(!o),l=o?o.nextSibling:i.firstChild;var d=e.duplicate();d.setEndPoint("StartToStart",s);for(var c=d.text.replace(/[\r\n]/g,"").length;c>l.nodeValue.length&&l.nextSibling;)c-=l.nodeValue.length,l=l.nextSibling;l.nodeValue,t&&l.nextSibling&&le.isText(l.nextSibling)&&c===l.nodeValue.length&&(c-=l.nodeValue.length,l=l.nextSibling),i=l,n=c}return{cont:i,offset:n}},ee=function(e){var t=function(e,n){var o,i;if(le.isText(e)){var r=le.listPrev(e,re.not(le.isText)),a=ae.last(r).previousSibling;o=a||e.parentNode,n+=ae.sum(ae.tail(r),le.nodeLength),i=!a}else{if(o=e.childNodes[n]||e,le.isText(o))return t(o,0);n=0,i=!1}return{node:o,collapseToStart:i,offset:n}},n=document.body.createTextRange(),o=t(e.node,e.offset);return n.moveToElementText(o.node),n.collapse(o.collapseToStart),n.moveStart("character",o.offset),n},te=function(t,n,o,i){this.sc=t,this.so=n,this.ec=o,this.eo=i;var r=function(){if(ie.isW3CRangeSupport){var e=document.createRange();return e.setStart(t,n),e.setEnd(o,i),e}var r=ee({node:t,offset:n});return r.setEndPoint("EndToEnd",ee({node:o,offset:i})),r};this.getPoints=function(){return{sc:t,so:n,ec:o,eo:i}},this.getStartPoint=function(){return{node:t,offset:n}},this.getEndPoint=function(){return{node:o,offset:i}},this.select=function(){var e=r();if(ie.isW3CRangeSupport){var t=document.getSelection();t.rangeCount>0&&t.removeAllRanges(),t.addRange(e)}else e.select();return this},this.normalize=function(){var e=function(e,t){if(le.isVisiblePoint(e)&&!le.isEdgePoint(e)||le.isVisiblePoint(e)&&le.isRightEdgePoint(e)&&!t||le.isVisiblePoint(e)&&le.isLeftEdgePoint(e)&&t||le.isVisiblePoint(e)&&le.isBlock(e.node)&&le.isEmpty(e.node))return e;var n=le.ancestor(e.node,le.isBlock);if((le.isLeftEdgePointOf(e,n)||le.isVoid(le.prevPoint(e).node))&&!t||(le.isRightEdgePointOf(e,n)||le.isVoid(le.nextPoint(e).node))&&t){if(le.isVisiblePoint(e))return e;t=!t}return(t?le.nextPointUntil(le.nextPoint(e),le.isVisiblePoint):le.prevPointUntil(le.prevPoint(e),le.isVisiblePoint))||e},t=e(this.getEndPoint(),!1),n=this.isCollapsed()?t:e(this.getStartPoint(),!0);return new te(n.node,n.offset,t.node,t.offset)},this.nodes=function(e,t){e=e||re.ok;var n=t&&t.includeAncestor,o=t&&t.fullyContains,i=this.getStartPoint(),r=this.getEndPoint(),a=[],s=[];return le.walkPoint(i,r,(function(t){var i;le.isEditable(t.node)||(o?(le.isLeftEdgePoint(t)&&s.push(t.node),le.isRightEdgePoint(t)&&ae.contains(s,t.node)&&(i=t.node)):i=n?le.ancestor(t.node,e):t.node,i&&e(i)&&a.push(i))}),!0),ae.unique(a)},this.commonAncestor=function(){return le.commonAncestor(t,o)},this.expand=function(e){var r=le.ancestor(t,e),a=le.ancestor(o,e);if(!r&&!a)return new te(t,n,o,i);var s=this.getPoints();return r&&(s.sc=r,s.so=0),a&&(s.ec=a,s.eo=le.nodeLength(a)),new te(s.sc,s.so,s.ec,s.eo)},this.collapse=function(e){return e?new te(t,n,t,n):new te(o,i,o,i)},this.splitText=function(){var e=t===o,r=this.getPoints();return le.isText(o)&&!le.isEdgePoint(this.getEndPoint())&&o.splitText(i),le.isText(t)&&!le.isEdgePoint(this.getStartPoint())&&(r.sc=t.splitText(n),r.so=0,e&&(r.ec=r.sc,r.eo=i-n)),new te(r.sc,r.so,r.ec,r.eo)},this.deleteContents=function(){if(this.isCollapsed())return this;var t=this.splitText(),n=t.nodes(null,{fullyContains:!0}),o=le.prevPointUntil(t.getStartPoint(),(function(e){return!ae.contains(n,e.node)})),i=[];return e.each(n,(function(e,t){var n=t.parentNode;o.node!==n&&1===le.nodeLength(n)&&i.push(n),le.remove(t,!1)})),e.each(i,(function(e,t){le.remove(t,!1)})),new te(o.node,o.offset,o.node,o.offset).normalize()};var a=function(e){return function(){var n=le.ancestor(t,e);return!!n&&n===le.ancestor(o,e)}};this.isOnEditable=a(le.isEditable),this.isOnList=a(le.isList),this.isOnAnchor=a(le.isAnchor),this.isOnCell=a(le.isCell),this.isLeftEdgeOf=function(e){if(!le.isLeftEdgePoint(this.getStartPoint()))return!1;var t=le.ancestor(this.sc,e);return t&&le.isLeftEdgeOf(this.sc,t)},this.isCollapsed=function(){return t===o&&n===i},this.wrapBodyInlineWithPara=function(){if(le.isBodyContainer(t)&&le.isEmpty(t))return t.innerHTML=le.emptyPara,new te(t.firstChild,0,t.firstChild,0);var e,n=this.normalize();if(le.isParaInline(t)||le.isPara(t))return n;if(le.isInline(n.sc)){var o=le.listAncestor(n.sc,re.not(le.isInline));e=ae.last(o),le.isInline(e)||(e=o[o.length-2]||n.sc.childNodes[n.so])}else e=n.sc.childNodes[n.so>0?n.so-1:0];var i=le.listPrev(e,le.isParaInline).reverse();if((i=i.concat(le.listNext(e.nextSibling,le.isParaInline))).length){var r=le.wrap(ae.head(i),"p");le.appendChildNodes(r,ae.tail(i))}return this.normalize()},this.insertNode=function(e){var t=this.wrapBodyInlineWithPara().deleteContents(),n=le.splitPoint(t.getStartPoint(),le.isInline(e));return n.rightNode?n.rightNode.parentNode.insertBefore(e,n.rightNode):n.container.appendChild(e),e},this.pasteHTML=function(t){var n=e("<div></div>").html(t)[0],o=ae.from(n.childNodes),i=this.wrapBodyInlineWithPara().deleteContents();return o.reverse().map((function(e){return i.insertNode(e)})).reverse()},this.toString=function(){var e=r();return ie.isW3CRangeSupport?e.toString():e.text},this.getWordRange=function(e){var t=this.getEndPoint();if(!le.isCharPoint(t))return this;var n=le.prevPointUntil(t,(function(e){return!le.isCharPoint(e)}));return e&&(t=le.nextPointUntil(t,(function(e){return!le.isCharPoint(e)}))),new te(n.node,n.offset,t.node,t.offset)},this.bookmark=function(e){return{s:{path:le.makeOffsetPath(e,t),offset:n},e:{path:le.makeOffsetPath(e,o),offset:i}}},this.paraBookmark=function(e){return{s:{path:ae.tail(le.makeOffsetPath(ae.head(e),t)),offset:n},e:{path:ae.tail(le.makeOffsetPath(ae.last(e),o)),offset:i}}},this.getClientRects=function(){return r().getClientRects()}},{create:function(e,t,n,o){if(arguments.length)2===arguments.length&&(n=e,o=t);else if(ie.isW3CRangeSupport){var i=document.getSelection();if(!i||0===i.rangeCount)return null;if(le.isBody(i.anchorNode))return null;var r=i.getRangeAt(0);e=r.startContainer,t=r.startOffset,n=r.endContainer,o=r.endOffset}else{var a=document.selection.createRange(),s=a.duplicate();s.collapse(!1);var l=a;l.collapse(!0);var d=$(l,!0),c=$(s,!1);le.isText(d.node)&&le.isLeftEdgePoint(d)&&le.isTextNode(c.node)&&le.isRightEdgePoint(c)&&c.node.nextSibling===d.node&&(d=c),e=d.cont,t=d.offset,n=c.cont,o=c.offset}return new te(e,t,n,o)},createFromNode:function(e){var t=e,n=0,o=e,i=le.nodeLength(o);return le.isVoid(t)&&(n=le.listPrev(t).length-1,t=t.parentNode),le.isBR(o)?(i=le.listPrev(o).length-1,o=o.parentNode):le.isVoid(o)&&(i=le.listPrev(o).length,o=o.parentNode),this.create(t,n,o,i)},createFromNodeBefore:function(e){return this.createFromNode(e).collapse(!0)},createFromNodeAfter:function(e){return this.createFromNode(e).collapse()},createFromBookmark:function(e,t){var n=le.fromOffsetPath(e,t.s.path),o=t.s.offset,i=le.fromOffsetPath(e,t.e.path),r=t.e.offset;return new te(n,o,i,r)},createFromParaBookmark:function(e,t){var n=e.s.offset,o=e.e.offset,i=le.fromOffsetPath(ae.head(t),e.s.path),r=le.fromOffsetPath(ae.last(t),e.e.path);return new te(i,n,r,o)}}),ce={readFileAsDataURL:function(t){return e.Deferred((function(n){e.extend(new FileReader,{onload:function(e){var t=e.target.result;n.resolve(t)},onerror:function(){n.reject(this)}}).readAsDataURL(t)})).promise()},createImage:function(t,n){return e.Deferred((function(o){var i=e("<img>");i.one("load",(function(){i.off("error abort"),o.resolve(i)})).one("error abort",(function(){i.off("load").detach(),o.reject(i)})).css({display:"none"}).appendTo(document.body).attr({src:t,"data-filename":n})})).promise()}},ue=(ne={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221},{isEdit:function(e){return ae.contains([8,9,13,32],e)},isMove:function(e){return ae.contains([37,38,39,40],e)},nameFromCode:re.invertObject(ne),code:ne}),fe=function(e){var t=[],n=-1,o=e[0],i=function(t){null!==t.contents&&e.html(t.contents),null!==t.bookmark&&de.createFromBookmark(o,t.bookmark).select()};this.undo=function(){e.html()!==t[n].contents&&this.recordUndo(),0<n&&(n--,i(t[n]))},this.redo=function(){t.length-1>n&&(n++,i(t[n]))},this.recordUndo=function(){var i;n++,t.length>n&&(t=t.slice(0,n)),t.push((i=de.create(),{contents:e.html(),bookmark:i?i.bookmark(o):{s:{path:[],offset:0},e:{path:[],offset:0}}}))},this.recordUndo()},he=function(){this.fromNode=function(t){var n=function(t,n){if(ie.jqueryVersion<1.9){var o={};return e.each(n,(function(e,n){o[n]=t.css(n)})),o}return t.css.call(t,n)}(t,["font-family","font-size","text-align","list-style-type","line-height"])||{};return n["font-size"]=parseInt(n["font-size"],10),n},this.stylePara=function(t,n){e.each(t.nodes(le.isPara,{includeAncestor:!0}),(function(t,o){e(o).css(n)}))},this.styleNodes=function(t,n){t=t.splitText();var o=n&&n.nodeName||"SPAN",i=!(!n||!n.expandClosestSibling),r=!(!n||!n.onlyPartialContains);if(t.isCollapsed())return[t.insertNode(le.create(o))];var a=le.makePredByNodeName(o),s=t.nodes(le.isText,{fullyContains:!0}).map((function(e){return le.singleChildAncestor(e,a)||le.wrap(e,o)}));if(i){if(r){var l=t.nodes();a=re.and(a,(function(e){return ae.contains(l,e)}))}return s.map((function(t){var n=le.withClosestSiblings(t,a),o=ae.head(n),i=ae.tail(n);return e.each(i,(function(e,t){le.appendChildNodes(o,t.childNodes),le.remove(t)})),ae.head(n)}))}return s},this.current=function(t){var n=e(le.isText(t.sc)?t.sc.parentNode:t.sc),o=this.fromNode(n);if(o["font-bold"]=document.queryCommandState("bold")?"bold":"normal",o["font-italic"]=document.queryCommandState("italic")?"italic":"normal",o["font-underline"]=document.queryCommandState("underline")?"underline":"normal",o["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",o["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",o["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",t.isOnList()){var i=e.inArray(o["list-style-type"],["circle","disc","disc-leading-zero","square"])>-1;o["list-style"]=i?"unordered":"ordered"}else o["list-style"]="none";var r=le.ancestor(t.sc,le.isPara);if(r&&r.style["line-height"])o["line-height"]=r.style.lineHeight;else{var a=parseInt(o["line-height"],10)/parseInt(o["font-size"],10);o["line-height"]=a.toFixed(1)}return o.anchor=t.isOnAnchor()&&le.ancestor(t.sc,le.isAnchor),o.ancestors=le.listAncestor(t.sc,le.isEditable),o.range=t,o}},pe=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var t=this,n=de.create().wrapBodyInlineWithPara(),o=n.nodes(le.isPara,{includeAncestor:!0}),i=ae.clusterBy(o,re.peq2("parentNode"));e.each(i,(function(n,o){var i=ae.head(o);le.isLi(i)?t.wrapList(o,i.parentNode.nodeName):e.each(o,(function(t,n){e(n).css("marginLeft",(function(e,t){return(parseInt(t,10)||0)+25}))}))})),n.select()},this.outdent=function(){var t=this,n=de.create().wrapBodyInlineWithPara(),o=n.nodes(le.isPara,{includeAncestor:!0}),i=ae.clusterBy(o,re.peq2("parentNode"));e.each(i,(function(n,o){var i=ae.head(o);le.isLi(i)?t.releaseList([o]):e.each(o,(function(t,n){e(n).css("marginLeft",(function(e,t){return(t=parseInt(t,10)||0)>25?t-25:""}))}))})),n.select()},this.toggleList=function(t){var n=this,o=de.create().wrapBodyInlineWithPara(),i=o.nodes(le.isPara,{includeAncestor:!0}),r=o.paraBookmark(i),a=ae.clusterBy(i,re.peq2("parentNode"));if(ae.find(i,le.isPurePara)){var s=[];e.each(a,(function(e,o){s=s.concat(n.wrapList(o,t))})),i=s}else{var l=o.nodes(le.isList,{includeAncestor:!0}).filter((function(n){return!e.nodeName(n,t)}));l.length?e.each(l,(function(e,n){le.replace(n,t)})):i=this.releaseList(a,!0)}de.createFromParaBookmark(r,i).select()},this.wrapList=function(e,t){var n=ae.head(e),o=ae.last(e),i=le.isList(n.previousSibling)&&n.previousSibling,r=le.isList(o.nextSibling)&&o.nextSibling,a=i||le.insertAfter(le.create(t||"UL"),o);return e=e.map((function(e){return le.isPurePara(e)?le.replace(e,"LI"):e})),le.appendChildNodes(a,e),r&&(le.appendChildNodes(a,ae.from(r.childNodes)),le.remove(r)),e},this.releaseList=function(t,n){var o=[];return e.each(t,(function(t,i){var r=ae.head(i),a=ae.last(i),s=n?le.lastAncestor(r,le.isList):r.parentNode,l=s.childNodes.length>1?le.splitTree(s,{node:a.parentNode,offset:le.position(a)+1},{isSkipPaddingBlankHTML:!0}):null,d=le.splitTree(s,{node:r.parentNode,offset:le.position(r)},{isSkipPaddingBlankHTML:!0});i=n?le.listDescendant(d,le.isLi):ae.from(d.childNodes).filter(le.isLi),!n&&le.isList(s.parentNode)||(i=i.map((function(e){return le.replace(e,"P")}))),e.each(ae.from(i).reverse(),(function(e,t){le.insertAfter(t,s)}));var c=ae.compact([s,d,l]);e.each(c,(function(t,n){var o=[n].concat(le.listDescendant(n,le.isList));e.each(o.reverse(),(function(e,t){le.nodeLength(t)||le.remove(t,!0)}))})),o=o.concat(i)})),o}},ve=function(){var t=new pe;this.insertTab=function(e,t,n){var o=le.createText(new Array(n+1).join(le.NBSP_CHAR));(t=t.deleteContents()).insertNode(o,!0),(t=de.create(o,n)).select()},this.insertParagraph=function(){var n=de.create();n=(n=n.deleteContents()).wrapBodyInlineWithPara();var o,i=le.ancestor(n.sc,le.isPara);if(i){if(le.isEmpty(i)&&le.isLi(i))return void t.toggleList(i.parentNode.nodeName);o=le.splitTree(i,n.getStartPoint());var r=le.listDescendant(i,le.isEmptyAnchor);r=r.concat(le.listDescendant(o,le.isEmptyAnchor)),e.each(r,(function(e,t){le.remove(t)}))}else{var a=n.sc.childNodes[n.so];o=e(le.emptyPara)[0],a?n.sc.insertBefore(o,a):n.sc.appendChild(o)}de.create(o,0).normalize().select()}},ge=function(){this.tab=function(e,t){var n=le.ancestor(e.commonAncestor(),le.isCell),o=le.ancestor(n,le.isTable),i=le.listDescendant(o,le.isCell),r=ae[t?"prev":"next"](i,n);r&&de.create(r,0).select()},this.createTable=function(t,n){for(var o,i=[],r=0;r<t;r++)i.push("<td>"+le.blank+"</td>");o=i.join("");for(var a,s=[],l=0;l<n;l++)s.push("<tr>"+o+"</tr>");return a=s.join(""),e('<table class="table table-bordered">'+a+"</table>")[0]}},me="bogus",be=function(t){var n=this,o=new he,i=new ge,r=new ve,a=new pe;this.createRange=function(e){return this.focus(e),de.create()},this.saveRange=function(e,t){this.focus(e),e.data("range",de.create()),t&&de.create().collapse().select()},this.saveNode=function(e){for(var t=[],n=0,o=e[0].childNodes.length;n<o;n++)t.push(e[0].childNodes[n]);e.data("childNodes",t)},this.restoreRange=function(e){var t=e.data("range");t&&(t.select(),this.focus(e))},this.restoreNode=function(e){e.html("");for(var t=e.data("childNodes"),n=0,o=t.length;n<o;n++)e[0].appendChild(t[n])},this.currentStyle=function(e){var t=de.create(),n=t&&t.isOnEditable()?o.current(t.normalize()):{};return le.isImg(e)&&(n.image=e),n},this.styleFromNode=function(e){return o.fromNode(e)};var s=function(e){var n=le.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"before.command")(e.html(),e)},l=function(e){var n=le.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"change")(e.html(),e)};this.undo=function(e){s(e),e.data("NoteHistory").undo(),l(e)},this.redo=function(e){s(e),e.data("NoteHistory").redo(),l(e)};for(var d=this.beforeCommand=function(e){s(e),n.focus(e)},c=this.afterCommand=function(e,t){e.data("NoteHistory").recordUndo(),t||l(e)},u=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"],f=0,h=u.length;f<h;f++)this[u[f]]=function(e){return function(t,n){d(t),document.execCommand(e,!1,n),c(t,!0)}}(u[f]);this.tab=function(e,t){var n=this.createRange(e);n.isCollapsed()&&n.isOnCell()?i.tab(n):(d(e),r.insertTab(e,n,t.tabsize),c(e))},this.untab=function(e){var t=this.createRange(e);t.isCollapsed()&&t.isOnCell()&&i.tab(t,!0)},this.insertParagraph=function(e){d(e),r.insertParagraph(e),c(e)},this.insertOrderedList=function(e){d(e),a.insertOrderedList(e),c(e)},this.insertUnorderedList=function(e){d(e),a.insertUnorderedList(e),c(e)},this.indent=function(e){d(e),a.indent(e),c(e)},this.outdent=function(e){d(e),a.outdent(e),c(e)},this.insertImage=function(e,n,o){ce.createImage(n,o).then((function(t){d(e),t.css({display:"",width:Math.min(e.width(),t.width())}),de.create().insertNode(t[0]),de.createFromNodeAfter(t[0]).select(),c(e)})).fail((function(){var n=le.makeLayoutInfo(e).holder();t.bindCustomEvent(n,e.data("callbacks"),"image.upload.error")()}))},this.insertNode=function(e,t){d(e),de.create().insertNode(t),de.createFromNodeAfter(t).select(),c(e)},this.insertText=function(e,t){d(e);var n=de.create().insertNode(le.createText(t));de.create(n,le.nodeLength(n)).select(),c(e)},this.pasteHTML=function(e,t){d(e);var n=de.create().pasteHTML(t);de.createFromNodeAfter(ae.last(n)).select(),c(e)},this.formatBlock=function(e,t){d(e),t=ie.isMSIE?"<"+t+">":t,document.execCommand("FormatBlock",!1,t),c(e)},this.formatPara=function(e){d(e),this.formatBlock(e,"P"),c(e)};for(f=1;f<=6;f++)this["formatH"+f]=function(e){return function(t){this.formatBlock(t,"H"+e)}}(f);this.fontSize=function(t,n){var i=de.create();if(i.isCollapsed()){var r=o.styleNodes(i),a=ae.head(r);e(r).css({"font-size":n+"px"}),a&&!le.nodeLength(a)&&(a.innerHTML=le.ZERO_WIDTH_NBSP_CHAR,de.createFromNodeAfter(a.firstChild).select(),t.data(me,a))}else d(t),e(o.styleNodes(i)).css({"font-size":n+"px"}),c(t)},this.insertHorizontalRule=function(t){d(t);var n=de.create().insertNode(e("<HR/>")[0]);n.nextSibling&&de.create(n.nextSibling,0).normalize().select(),c(t)},this.removeBogus=function(e){var t=e.data(me);if(t){var n=ae.find(ae.from(t.childNodes),le.isText),o=n.nodeValue.indexOf(le.ZERO_WIDTH_NBSP_CHAR);-1!==o&&n.deleteData(o,1),le.isEmpty(t)&&le.remove(t),e.removeData(me)}},this.lineHeight=function(e,t){d(e),o.stylePara(de.create(),{lineHeight:t}),c(e)},this.unlink=function(e){var t=this.createRange(e);if(t.isOnAnchor()){var n=le.ancestor(t.sc,le.isAnchor);(t=de.createFromNode(n)).select(),d(e),document.execCommand("unlink"),c(e)}},this.createLink=function(t,n,i){var r=n.url,a=n.text,s=n.isNewWindow,l=n.range||this.createRange(t),u=l.toString()!==a;i=i||le.makeLayoutInfo(t).editor().data("options"),d(t),i.onCreateLink&&(r=i.onCreateLink(r));var f=[];if(u){var h=l.insertNode(e("<A>"+a+"</A>")[0]);f.push(h)}else f=o.styleNodes(l,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0});e.each(f,(function(t,n){e(n).attr("href",r),s?e(n).attr("target","_blank"):e(n).removeAttr("target")}));var p=de.createFromNodeBefore(ae.head(f)).getStartPoint(),v=de.createFromNodeAfter(ae.last(f)).getEndPoint();de.create(p.node,p.offset,v.node,v.offset).select(),c(t)},this.getLinkInfo=function(t){this.focus(t);var n=de.create().expand(le.isAnchor),o=e(ae.head(n.nodes(le.isAnchor)));return{range:n,text:n.toString(),isNewWindow:!!o.length&&"_blank"===o.attr("target"),url:o.length?o.attr("href"):""}},this.color=function(e,t){},this.insertTable=function(e,t){var n=t.split("x");d(e),de.create().deleteContents().insertNode(i.createTable(n[0],n[1])),c(e)},this.floatMe=function(e,t,n){d(e),n.removeClass("pull-left pull-right"),t&&"none"!==t&&n.addClass("pull-"+t),n.css("float",t),c(e)},this.imageShape=function(e,t,n){d(e),n.removeClass("img-rounded img-circle img-thumbnail"),t&&n.addClass(t),c(e)},this.resize=function(e,t,n){d(e),n.css({width:100*t+"%",height:""}),c(e)},this.resizeTo=function(e,t,n){var o;if(n){var i=e.y/e.x,r=t.data("ratio");o={width:r>i?e.x:e.y/r,height:r>i?e.x*r:e.y}}else o={width:e.x,height:e.y};t.css(o)},this.removeMedia=function(n,o,i){d(n),i.detach(),t.bindCustomEvent(e(),n.data("callbacks"),"media.delete")(i,n),c(n)},this.focus=function(e){e.focus(),ie.isFF&&!de.create().isOnEditable()&&de.createFromNode(e[0]).normalize().collapse().select()},this.isEmpty=function(e){return le.isEmpty(e[0])||le.emptyPara===e.html()}},ye=function(){this.update=function(t,n){var o=function(t,n){t.find(".dropdown-menu li a").each((function(){var t=e(this).data("value")+""==n+"";this.className=t?"checked":""}))},i=function(e,n){t.find(e).toggleClass("active",n())};if(n.image){var r=e(n.image);i('button[data-event="imageShape"][data-value="img-rounded"]',(function(){return r.hasClass("img-rounded")})),i('button[data-event="imageShape"][data-value="img-circle"]',(function(){return r.hasClass("img-circle")})),i('button[data-event="imageShape"][data-value="img-thumbnail"]',(function(){return r.hasClass("img-thumbnail")})),i('button[data-event="imageShape"]:not([data-value])',(function(){return!r.is(".img-rounded, .img-circle, .img-thumbnail")}));var a=r.css("float");i('button[data-event="floatMe"][data-value="left"]',(function(){return"left"===a})),i('button[data-event="floatMe"][data-value="right"]',(function(){return"right"===a})),i('button[data-event="floatMe"][data-value="none"]',(function(){return"left"!==a&&"right"!==a}));var s=r.attr("style");return i('button[data-event="resize"][data-value="1"]',(function(){return!!/(^|\s)(max-)?width\s*:\s*100%/.test(s)})),i('button[data-event="resize"][data-value="0.5"]',(function(){return!!/(^|\s)(max-)?width\s*:\s*50%/.test(s)})),void i('button[data-event="resize"][data-value="0.25"]',(function(){return!!/(^|\s)(max-)?width\s*:\s*25%/.test(s)}))}var l=t.find(".note-fontname");if(l.length){var d=n["font-family"];if(d){for(var c=d.split(","),u=0,f=c.length;u<f&&(d=c[u].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!ie.isFontInstalled(d));u++);l.find(".note-current-fontname").text(d),o(l,d)}}var h=t.find(".note-fontsize");h.find(".note-current-fontsize").text(n["font-size"]),o(h,parseFloat(n["font-size"])),o(t.find(".note-height"),parseFloat(n["line-height"])),i('button[data-event="bold"]',(function(){return"bold"===n["font-bold"]})),i('button[data-event="italic"]',(function(){return"italic"===n["font-italic"]})),i('button[data-event="underline"]',(function(){return"underline"===n["font-underline"]})),i('button[data-event="strikethrough"]',(function(){return"strikethrough"===n["font-strikethrough"]})),i('button[data-event="superscript"]',(function(){return"superscript"===n["font-superscript"]})),i('button[data-event="subscript"]',(function(){return"subscript"===n["font-subscript"]})),i('button[data-event="justifyLeft"]',(function(){return"left"===n["text-align"]||"start"===n["text-align"]})),i('button[data-event="justifyCenter"]',(function(){return"center"===n["text-align"]})),i('button[data-event="justifyRight"]',(function(){return"right"===n["text-align"]})),i('button[data-event="justifyFull"]',(function(){return"justify"===n["text-align"]})),i('button[data-event="insertUnorderedList"]',(function(){return"unordered"===n["list-style"]})),i('button[data-event="insertOrderedList"]',(function(){return"ordered"===n["list-style"]}))},this.updateRecentColor=function(e,t,n){}},Ce=function(){var e=new ye;this.update=function(t,n){e.update(t,n)},this.updateRecentColor=function(t,n,o){e.updateRecentColor(t,n,o)},this.activate=function(e){e.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(e){e.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(e,t){e.find('button[data-event="fullscreen"]').toggleClass("active",t)},this.updateCodeview=function(e,t){e.find('button[data-event="codeview"]').toggleClass("active",t),t?this.deactivate(e):this.activate(e)},this.get=function(e,t){return le.makeLayoutInfo(e).toolbar().find("[data-name="+t+"]")},this.setButtonState=function(e,t,n){n=!1!==n,this.get(e,t).toggleClass("active",n)}},ke=function(){var t=e(document);this.attach=function(e,t){t.disableResizeEditor||e.statusbar().on("mousedown",n)};var n=function(e){e.preventDefault(),e.stopPropagation();var n=le.makeLayoutInfo(e.target).editable(),o=n.offset().top-t.scrollTop(),i=le.makeLayoutInfo(e.currentTarget||e.target).editor().data("options");t.on("mousemove",(function(e){var t=e.clientY-(o+24);t=i.minHeight>0?Math.max(t,i.minHeight):t,t=i.maxHeight>0?Math.min(t,i.maxHeight):t,n.height(t)})).one("mouseup",(function(){t.off("mousemove")}))}},xe=function(){var t=new ye,n=function(t,n){var o=n&&n.isAirMode,i=n&&n.isLeftTop,r=e(t),a=o?r.offset():r.position(),s=i?0:r.outerHeight(!0);return{left:a.left,top:a.top+s}},o=function(e,t){e.css({display:"block",left:t.left,top:t.top})};this.update=function(i,r,a){t.update(i,r);var s=i.find(".note-link-popover");if(r.anchor){var l=s.find("a"),d=e(r.anchor).attr("href"),c=e(r.anchor).attr("target");l.attr("href",d).html(d),c?l.attr("target","_blank"):l.removeAttr("target"),o(s,n(r.anchor,{isAirMode:a}))}else s.hide();var u=i.find(".note-image-popover");r.image?o(u,n(r.image,{isAirMode:a,isLeftTop:!0})):u.hide();var f=i.find(".note-air-popover");if(a&&r.range&&!r.range.isCollapsed()){var h=ae.last(r.range.getClientRects());if(h){var p=re.rect2bnd(h);o(f,{left:Math.max(p.left+p.width/2-20,0),top:p.top+p.height})}}else f.hide()},this.updateRecentColor=function(e,t,n){e.updateRecentColor(e,t,n)},this.hide=function(e){e.children().hide()}},we=function(t){var n=e(document),o=function(o){if(le.isControlSizing(o.target)){o.preventDefault(),o.stopPropagation();var i=le.makeLayoutInfo(o.target),r=i.handle(),a=i.popover(),s=i.editable(),l=i.editor(),d=r.find(".note-control-selection").data("target"),c=e(d),u=c.offset(),f=n.scrollTop(),h=l.data("options").airMode;n.on("mousemove",(function(e){t.invoke("editor.resizeTo",{x:e.clientX-u.left,y:e.clientY-(u.top-f)},c,!e.shiftKey),t.invoke("handle.update",r,{image:d},h),t.invoke("popover.update",a,{image:d},h)})).one("mouseup",(function(){n.off("mousemove"),t.invoke("editor.afterCommand",s)})),c.data("ratio")||c.data("ratio",c.height()/c.width())}};this.attach=function(e){e.handle().on("mousedown",o)},this.update=function(t,n,o){var i=t.find(".note-control-selection");if(n.image){var r=e(n.image),a=o?r.offset():r.position(),s={w:r.outerWidth(!0),h:r.outerHeight(!0)};i.css({display:"block",left:a.left,top:a.top,width:s.w,height:s.h}).data("target",n.image);var l=s.w+"x"+s.h;i.find(".note-control-selection-info").text(l)}else i.hide()},this.hide=function(e){e.children().hide()}},Te=function(t){var n=e(window),o=e("html, body");this.toggle=function(e){var i=e.editor(),r=e.toolbar(),a=e.editable(),s=e.codable(),l=function(e){a.css("height",e.h),s.css("height",e.h),s.data("cmeditor")&&s.data("cmeditor").setsize(null,e.h)};i.toggleClass("fullscreen");var d=i.hasClass("fullscreen");d?(a.data("orgheight",a.css("height")),n.on("resize",(function(){l({h:n.height()-r.outerHeight()})})).trigger("resize"),o.css("overflow","hidden")):(n.off("resize"),l({h:a.data("orgheight")}),o.css("overflow","visible")),t.invoke("toolbar.updateFullscreen",r,d)}};ie.hasCodeMirror&&(ie.isSupportAmd?require(["CodeMirror"],(function(e){oe=e})):oe=window.CodeMirror);var Ne=function(e){this.sync=function(t){e.invoke("codeview.isActivated",t)&&ie.hasCodeMirror&&t.codable().data("cmEditor").save()},this.isActivated=function(e){return e.editor().hasClass("codeview")},this.toggle=function(e){this.isActivated(e)?this.deactivate(e):this.activate(e)},this.activate=function(t){var n=t.editor(),o=t.toolbar(),i=t.editable(),r=t.codable(),a=t.popover(),s=t.handle(),l=n.data("options");if(r.val(le.html(i,l.prettifyHtml)),r.height(i.height()),e.invoke("toolbar.updateCodeview",o,!0),e.invoke("popover.hide",a),e.invoke("handle.hide",s),n.addClass("codeview"),r.focus(),ie.hasCodeMirror){var d=oe.fromTextArea(r[0],l.codemirror);if(l.codemirror.tern){var c=new oe.TernServer(l.codemirror.tern);d.ternServer=c,d.on("cursorActivity",(function(e){c.updateArgHints(e)}))}d.setSize(null,i.outerHeight()),r.data("cmEditor",d)}},this.deactivate=function(t){var n=t.holder(),o=t.editor(),i=t.toolbar(),r=t.editable(),a=t.codable(),s=o.data("options");if(ie.hasCodeMirror){var l=a.data("cmEditor");a.val(l.getValue()),l.toTextArea()}var d=le.value(a,s.prettifyHtml)||le.emptyPara,c=r.html()!==d;r.html(d),r.height(s.height?a.height():"auto"),o.removeClass("codeview"),c&&e.bindCustomEvent(n,r.data("callbacks"),"change")(r.html(),r),r.focus(),e.invoke("toolbar.updateCodeview",i,!1)}},Pe=function(t){var n=e(document);this.attach=function(e,t){t.airMode||t.disableDragAndDrop?n.on("drop",(function(e){e.preventDefault()})):this.attachDragAndDropEvent(e,t)},this.attachDragAndDropEvent=function(o,i){var r=e(),a=o.editor(),s=o.dropzone(),l=s.find(".note-dropzone-message");n.on("dragenter",(function(e){var n=t.invoke("codeview.isActivated",o),d=a.width()>0&&a.height()>0;n||r.length||!d||(a.addClass("dragover"),s.width(a.width()),s.height(a.height()),l.text(i.langInfo.image.dragImageHere)),r=r.add(e.target)})).on("dragleave",(function(e){(r=r.not(e.target)).length||a.removeClass("dragover")})).on("drop",(function(){r=e(),a.removeClass("dragover")})),s.on("dragenter",(function(){s.addClass("hover"),l.text(i.langInfo.image.dropImage)})).on("dragleave",(function(){s.removeClass("hover"),l.text(i.langInfo.image.dragImageHere)})),s.on("drop",(function(n){var o=n.originalEvent.dataTransfer,i=le.makeLayoutInfo(n.currentTarget||n.target);if(o&&o.files&&o.files.length)n.preventDefault(),i.editable().focus(),t.insertImages(i,o.files);else for(var r=function(){i.holder().summernote("insertNode",this)},a=0,s=o.types.length;a<s;a++){var l=o.types[a],d=o.getData(l);l.toLowerCase().indexOf("text")>-1?i.holder().summernote("pasteHTML",d):e(d).each(r)}})).on("dragover",!1)}},Se=function(t){var n;this.attach=function(r){ie.isMSIE&&ie.browserVersion>10||ie.isFF?(n=e("<div />").attr("contenteditable",!0).css({position:"absolute",left:-1e5,opacity:0}),r.editable().on("keydown",(function(e){e.ctrlKey&&e.keyCode===ue.code.V&&(t.invoke("saveRange",r.editable()),n.focus(),setTimeout((function(){o(r)}),0))})),r.editable().before(n)):r.editable().on("paste",i)};var o=function(o){var i=o.editable(),r=n[0].firstChild;if(le.isImg(r)){for(var a=r.src,s=atob(a.split(",")[1]),l=new Uint8Array(s.length),d=0;d<s.length;d++)l[d]=s.charCodeAt(d);var c=new Blob([l],{type:"image/png"});c.name="clipboard.png",t.invoke("restoreRange",i),t.invoke("focus",i),t.insertImages(o,[c])}else{var u=e("<div />").html(n.html()).html();t.invoke("restoreRange",i),t.invoke("focus",i),u&&t.invoke("pasteHTML",i,u)}n.empty()},i=function(e){var n=e.originalEvent.clipboardData,o=le.makeLayoutInfo(e.currentTarget||e.target),i=o.editable();if(n&&n.items&&n.items.length){var r=ae.head(n.items);"file"===r.kind&&-1!==r.type.indexOf("image/")&&t.insertImages(o,[r.getAsFile()]),t.invoke("editor.afterCommand",i)}}},Le=function(t){var n=function(e,t){e.toggleClass("disabled",!t),e.attr("disabled",!t)},o=function(e,t){e.on("keypress",(function(e){e.keyCode===ue.code.ENTER&&t.trigger("click")}))};this.showLinkDialog=function(t,i,r){return e.Deferred((function(e){var t=i.find(".note-link-dialog"),a=t.find(".note-link-text"),s=t.find(".note-link-url"),l=t.find(".note-link-btn"),d=t.find("input[type=checkbox]");t.one("shown.bs.modal",(function(){a.val(r.text),a.on("input",(function(){n(l,a.val()&&s.val()),r.text=a.val()})),r.url||(r.url=r.text||"http://",n(l,r.text)),s.on("input",(function(){n(l,a.val()&&s.val()),r.text||a.val(s.val())})).val(r.url).trigger("focus").trigger("select"),o(s,l),o(a,l),d.prop("checked",r.isNewWindow),l.one("click",(function(n){n.preventDefault(),e.resolve({range:r.range,url:s.val(),text:a.val(),isNewWindow:d.is(":checked")}),t.modal("hide")}))})).one("hidden.bs.modal",(function(){a.off("input keypress"),s.off("input keypress"),l.off("click"),"pending"===e.state()&&e.reject()})).modal("show")})).promise()},this.show=function(e){var n=e.editor(),o=e.dialog(),i=e.editable(),r=e.popover(),a=t.invoke("editor.getLinkInfo",i),s=n.data("options");t.invoke("editor.saveRange",i),this.showLinkDialog(i,o,a).then((function(e){t.invoke("editor.restoreRange",i),t.invoke("editor.createLink",i,e,s),t.invoke("popover.hide",r)})).fail((function(){t.invoke("editor.restoreRange",i)}))}},Ee=function(t){this.show=function(e){var n=e.dialog(),o=e.editable();t.invoke("editor.saveRange",o),this.showImageDialog(o,n).then((function(n){t.invoke("editor.restoreRange",o),"string"==typeof n?t.invoke("editor.insertImage",o,n):t.insertImages(e,n)})).fail((function(){t.invoke("editor.restoreRange",o)}))},this.showImageDialog=function(t,n){return e.Deferred((function(e){var t=n.find(".note-image-dialog"),o=n.find(".note-image-input"),i=n.find(".note-image-url"),r=n.find(".note-image-btn");t.one("shown.bs.modal",(function(){var n;o.replaceWith(o.clone().on("change",(function(){e.resolve(this.files||this.value),t.modal("hide")})).val("")),r.click((function(n){n.preventDefault(),e.resolve(i.val()),t.modal("hide")})),i.on("keyup paste",(function(e){var t,n,o;t="paste"===e.type?e.originalEvent.clipboardData.getData("text"):i.val(),o=t,(n=r).toggleClass("disabled",!o),n.attr("disabled",!o)})).val("").trigger("focus"),n=r,i.on("keypress",(function(e){e.keyCode===ue.code.ENTER&&n.trigger("click")}))})).one("hidden.bs.modal",(function(){o.off("change"),i.off("keyup paste keypress"),r.off("click"),"pending"===e.state()&&e.reject()})).modal("show")}))}},Fe=function(t){this.showHelpDialog=function(t,n){return e.Deferred((function(e){n.find(".note-help-dialog").one("hidden.bs.modal",(function(){e.resolve()})).modal("show")})).promise()},this.show=function(e){var n=e.dialog(),o=e.editable();t.invoke("editor.saveRange",o,!0),this.showHelpDialog(o,n).then((function(){t.invoke("editor.restoreRange",o)}))}};e.summernote=e.summernote||{},e.extend(e.summernote,{version:"0.6.16",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,disableResizeImage:!1,shortcuts:!0,textareaAutoSync:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",icons:{font:{bold:"bold",italic:"italic",underline:"underline",clear:"eraser",height:"text-height",strikethrough:"strikethrough",superscript:"superscript",subscript:"subscript"},image:{image:"picture-o",floatLeft:"align-left",floatRight:"align-right",floatNone:"align-justify",shapeRounded:"square",shapeCircle:"circle-o",shapeThumbnail:"picture-o",shapeNone:"times",remove:"trash-o"},link:{link:"link",unlink:"unlink",edit:"edit"},table:{table:"table"},hr:{insert:"minus"},style:{style:"magic"},lists:{unordered:"list-ul",ordered:"list-ol"},options:{help:"question",fullscreen:"arrows-alt",codeview:"code"},paragraph:{paragraph:"align-left",outdent:"outdent",indent:"indent",left:"align-left",center:"align-center",right:"align-right",justify:"align-justify"},color:{recent:"font"},history:{undo:"undo",redo:"repeat"},misc:{check:"check"}},dialogsInBody:!1,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],plugin:{},airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(e){return-1!==e.indexOf("@")&&-1===e.indexOf(":")&&(e="mailto:"+e),e},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}});var Ie=new function(){var t=function(e,t){var n=t.event,o=t.value,i=t.title,r=t.className,a=t.dropdown,s=t.hide;return(a?'<div class="btn-group'+(r?" "+r:"")+'">':"")+'<button type="button" class="btn btn-default btn-sm'+(!a&&r?" "+r:"")+(a?" dropdown-toggle":"")+'"'+(a?' data-toggle="dropdown"':"")+(i?' title="'+i+'"':"")+(n?' data-event="'+n+'"':"")+(o?" data-value='"+o+"'":"")+(s?" data-hide='"+s+"'":"")+' tabindex="-1">'+e+(a?' <span class="caret"></span>':"")+"</button>"+(a||"")+(a?"</div>":"")},n=function(e,n){return t('<i class="'+e+'"></i>',n)},o=function(t,n){var o=e('<div class="'+t+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return o.find(".popover-content").append(n),o},i=function(e,t,n,o){return'<div class="'+e+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(t?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+t+"</h4></div>":"")+'<div class="modal-body">'+n+"</div>"+(o?'<div class="modal-footer">'+o+"</div>":"")+"</div></div></div>"},r=function(e,t,n){var o="snmenu dropdown-menu"+(t?" "+t:"");return n=n||"ul",e instanceof Array&&(e=e.join("")),"<"+n+' class="'+o+'">'+e+"</"+n+">"},a={picture:function(e,t){return n(t.iconPrefix+t.icons.image.image,{event:"showImageDialog",title:e.image.image,hide:!0})},link:function(e,t){return n(t.iconPrefix+t.icons.link.link,{event:"showLinkDialog",title:e.link.link,hide:!0})},table:function(e,t){return n(t.iconPrefix+t.icons.table.table,{title:e.table.table,dropdown:r(['<div class="note-dimension-picker">','<div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div>','<div class="note-dimension-picker-highlighted"></div>','<div class="note-dimension-picker-unhighlighted"></div>',"</div>",'<div class="note-dimension-display"> 1 x 1 </div>'],"note-table")})},style:function(e,t){var o=t.styleTags.reduce((function(t,n){var o=e.style["p"===n?"normal":n];return t+'<li><a data-event="formatBlock" href="#" data-value="'+n+'">'+("p"===n||"pre"===n?o:"<"+n+">"+o+"</"+n+">")+"</a></li>"}),"");return n(t.iconPrefix+t.icons.style.style,{title:e.style.style,dropdown:r(o)})},fontname:function(e,n){var o=[],i=n.fontNames.reduce((function(e,t){return ie.isFontInstalled(t)||ae.contains(n.fontNamesIgnoreCheck,t)?(o.push(t),e+'<li><a data-event="fontName" href="#" data-value="'+t+'" style="font-family:\''+t+'\'"><i class="'+n.iconPrefix+n.icons.misc.check+'"></i> '+t+"</a></li>"):e}),""),a=ie.isFontInstalled(n.defaultFontName)?n.defaultFontName:o[0];return t('<span class="note-current-fontname">'+a+"</span>",{title:e.font.name,className:"note-fontname",dropdown:r(i,"note-check")})},fontsize:function(e,n){var o=n.fontSizes.reduce((function(e,t){return e+'<li><a data-event="fontSize" href="#" data-value="'+t+'"><i class="'+n.iconPrefix+n.icons.misc.check+'"></i> '+t+"</a></li>"}),"");return t('<span class="note-current-fontsize">11</span>',{title:e.font.size,className:"note-fontsize",dropdown:r(o,"note-check")})},color:function(e,n){var o='<i class="'+n.iconPrefix+n.icons.color.recent+'" style="color:black;background-color:yellow;"></i>',i=t(o,{className:"note-recent-color",title:e.color.recent,event:"color",value:'{"foreColor":"#000000"}'}),a=['<li><div class="btn-group">','<div class="note-palette-title">'+e.color.foreground+"</div>",'<div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+e.color.reset+'">',e.color.resetToDefault,"</div>",'<div class="note-color-palette" data-target-event="foreColor"></div>',"</div></li>"];return i+t("",{title:e.color.more,dropdown:r(a)})},bold:function(e,t){return n(t.iconPrefix+t.icons.font.bold,{event:"bold",title:e.font.bold})},italic:function(e,t){return n(t.iconPrefix+t.icons.font.italic,{event:"italic",title:e.font.italic})},underline:function(e,t){return n(t.iconPrefix+t.icons.font.underline,{event:"underline",title:e.font.underline})},strikethrough:function(e,t){return n(t.iconPrefix+t.icons.font.strikethrough,{event:"strikethrough",title:e.font.strikethrough})},superscript:function(e,t){return n(t.iconPrefix+t.icons.font.superscript,{event:"superscript",title:e.font.superscript})},subscript:function(e,t){return n(t.iconPrefix+t.icons.font.subscript,{event:"subscript",title:e.font.subscript})},clear:function(e,t){return n(t.iconPrefix+t.icons.font.clear,{event:"removeFormat",title:e.font.clear})},ul:function(e,t){return n(t.iconPrefix+t.icons.lists.unordered,{event:"insertUnorderedList",title:e.lists.unordered})},ol:function(e,t){return n(t.iconPrefix+t.icons.lists.ordered,{event:"insertOrderedList",title:e.lists.ordered})},paragraph:function(e,t){var o=n(t.iconPrefix+t.icons.paragraph.left,{title:e.paragraph.left,event:"justifyLeft"}),i=n(t.iconPrefix+t.icons.paragraph.center,{title:e.paragraph.center,event:"justifyCenter"}),a=n(t.iconPrefix+t.icons.paragraph.right,{title:e.paragraph.right,event:"justifyRight"}),s=n(t.iconPrefix+t.icons.paragraph.justify,{title:e.paragraph.justify,event:"justifyFull"}),l=n(t.iconPrefix+t.icons.paragraph.outdent,{title:e.paragraph.outdent,event:"outdent"}),d=['<div class="note-align btn-group">',o+i+a+s,'</div><div class="note-list btn-group">',n(t.iconPrefix+t.icons.paragraph.indent,{title:e.paragraph.indent,event:"indent"})+l,"</div>"];return n(t.iconPrefix+t.icons.paragraph.paragraph,{title:e.paragraph.paragraph,dropdown:r(d,"","div")})},height:function(e,t){var o=t.lineHeights.reduce((function(e,n){return e+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(n)+'"><i class="'+t.iconPrefix+t.icons.misc.check+'"></i> '+n+"</a></li>"}),"");return n(t.iconPrefix+t.icons.font.height,{title:e.font.height,dropdown:r(o,"note-check")})},help:function(e,t){return n(t.iconPrefix+t.icons.options.help,{event:"showHelpDialog",title:e.options.help,hide:!0})},fullscreen:function(e,t){return n(t.iconPrefix+t.icons.options.fullscreen,{event:"fullscreen",title:e.options.fullscreen})},codeview:function(e,t){return n(t.iconPrefix+t.icons.options.codeview,{event:"codeview",title:e.options.codeview})},undo:function(e,t){return n(t.iconPrefix+t.icons.history.undo,{event:"undo",title:e.history.undo})},redo:function(e,t){return n(t.iconPrefix+t.icons.history.redo,{event:"redo",title:e.history.redo})},hr:function(e,t){return n(t.iconPrefix+t.icons.hr.insert,{event:"insertHorizontalRule",title:e.hr.insert})}},s=function(i,r){var s,l,d,c,u,f,h,p,v,g,m,b,y,C,k=e('<div class="note-popover" />');return k.append((s=n(r.iconPrefix+r.icons.link.edit,{title:i.link.edit,event:"showLinkDialog",hide:!0}),l=n(r.iconPrefix+r.icons.link.unlink,{title:i.link.unlink,event:"unlink"}),o("note-link-popover",'<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+s+l+"</div>"))),k.append((d=t('<span class="note-fontsize-10">100%</span>',{title:i.image.resizeFull,event:"resize",value:"1"}),c=t('<span class="note-fontsize-10">50%</span>',{title:i.image.resizeHalf,event:"resize",value:"0.5"}),u=t('<span class="note-fontsize-10">25%</span>',{title:i.image.resizeQuarter,event:"resize",value:"0.25"}),f=n(r.iconPrefix+r.icons.image.floatLeft,{title:i.image.floatLeft,event:"floatMe",value:"left"}),h=n(r.iconPrefix+r.icons.image.floatRight,{title:i.image.floatRight,event:"floatMe",value:"right"}),p=n(r.iconPrefix+r.icons.image.floatNone,{title:i.image.floatNone,event:"floatMe",value:"none"}),v=n(r.iconPrefix+r.icons.image.shapeRounded,{title:i.image.shapeRounded,event:"imageShape",value:"img-rounded"}),g=n(r.iconPrefix+r.icons.image.shapeCircle,{title:i.image.shapeCircle,event:"imageShape",value:"img-circle"}),m=n(r.iconPrefix+r.icons.image.shapeThumbnail,{title:i.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),b=n(r.iconPrefix+r.icons.image.shapeNone,{title:i.image.shapeNone,event:"imageShape",value:""}),y=n(r.iconPrefix+r.icons.image.remove,{title:i.image.remove,event:"removeMedia",value:"none"}),C=(r.disableResizeImage?"":'<div class="btn-group">'+d+c+u+"</div>")+'<div class="btn-group">'+f+h+p+'</div><br><div class="btn-group">'+v+g+m+b+'</div><div class="btn-group">'+y+"</div>",o("note-image-popover",C))),r.airMode&&k.append(function(){for(var t=e("<div />"),n=0,s=r.airPopover.length;n<s;n++){for(var l=r.airPopover[n],d=e('<div class="note-'+l[0]+' btn-group">'),c=0,u=l[1].length;c<u;c++){var f=e(a[l[1][c]](i,r));f.attr("data-name",l[1][c]),d.append(f)}t.append(d)}return o("note-air-popover",t.children())}()),k},l=function(e){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="'+(e.disableResizeImage?"note-control-holder":"note-control-sizing")+' note-control-se"></div>'+(e.disableResizeImage?"":'<div class="note-control-selection-info"></div>')+"</div></div>"},d=function(e,t){var n="note-shortcut-col col-xs-6 note-shortcut-",o=[];for(var i in t)t.hasOwnProperty(i)&&o.push('<div class="'+n+'key">'+t[i].kbd+'</div><div class="'+n+'name">'+t[i].text+"</div>");return'<div class="note-shortcut-row row"><div class="'+n+'title col-xs-offset-6">'+e+'</div></div><div class="note-shortcut-row row">'+o.join('</div><div class="note-shortcut-row row">')+"</div>"},c=function(e){var t=[{kbd:" + B",text:e.font.bold},{kbd:" + I",text:e.font.italic},{kbd:" + U",text:e.font.underline},{kbd:" + \\",text:e.font.clear}];return d(e.shortcut.textFormatting,t)},u=function(e){var t=[{kbd:" + Z",text:e.history.undo},{kbd:" +  + Z",text:e.history.redo},{kbd:" + ]",text:e.paragraph.indent},{kbd:" + [",text:e.paragraph.outdent},{kbd:" + ENTER",text:e.hr.insert}];return d(e.shortcut.action,t)},f=function(e){var t=[{kbd:" +  + L",text:e.paragraph.left},{kbd:" +  + E",text:e.paragraph.center},{kbd:" +  + R",text:e.paragraph.right},{kbd:" +  + J",text:e.paragraph.justify},{kbd:" +  + NUM7",text:e.lists.ordered},{kbd:" +  + NUM8",text:e.lists.unordered}];return d(e.shortcut.paragraphFormatting,t)},h=function(e){var t=[{kbd:" + NUM0",text:e.style.normal},{kbd:" + NUM1",text:e.style.h1},{kbd:" + NUM2",text:e.style.h2},{kbd:" + NUM3",text:e.style.h3},{kbd:" + NUM4",text:e.style.h4},{kbd:" + NUM5",text:e.style.h5},{kbd:" + NUM6",text:e.style.h6}];return d(e.shortcut.documentStyle,t)},p=function(e,t){var n='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',o=["<div "+n+">"+u(e)+"</div><div "+n+">"+c(e)+"</div>","<div "+n+">"+h(e)+"</div><div "+n+">"+f(e)+"</div>"];return t.extraKeys&&o.push("<div "+n+">"+function(e,t){var n=t.extraKeys,o=[];for(var i in n)n.hasOwnProperty(i)&&o.push({kbd:i,text:n[i]});return d(e.shortcut.extraKeys,o)}(e,t)+"</div>"),'<div class="note-shortcut-row row">'+o.join('</div><div class="note-shortcut-row row">')+"</div>"},v={image:function(e,t){var n="";if(t.maximumImageFileSize){var o=Math.floor(Math.log(t.maximumImageFileSize)/Math.log(1024)),r=1*(t.maximumImageFileSize/Math.pow(1024,o)).toFixed(2)+" "+" KMGTP"[o]+"B";n="<small>"+e.image.maximumFileSize+" : "+r+"</small>"}var a='<div class="form-group row note-group-select-from-files"><label>'+e.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+n+'</div><div class="form-group row"><label>'+e.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>',s='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+e.image.insert+"</button>";return i("note-image-dialog",e.image.insert,a,s)},link:function(e,t){var n='<div class="form-group row"><label>'+e.link.textToDisplay+'</label><input class="note-link-text form-control col-md-12" type="text" /></div><div class="form-group row"><label>'+e.link.url+'</label><input class="note-link-url form-control col-md-12" type="text" value="http://" /></div>'+(t.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+e.link.openInNewWindow+"</label></div>"),o='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+e.link.insert+"</button>";return i("note-link-dialog",e.link.insert,n,o)},help:function(e,t){var n='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+e.shortcut.close+'</a><div class="title">'+e.shortcut.shortcuts+"</div>"+(ie.isMac?p(e,t):p(e,t).replace(//g,"Ctrl").replace(//g,"Shift"))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.16</a>  <a href="//github.com/summernote/summernote" target="_blank">Project</a>  <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return i("note-help-dialog","",n,"")}},g=function(t,n){var o="";return e.each(v,(function(e,i){o+=i(t,n)})),'<div class="note-dialog">'+o+"</div>"},m=function(t,n,o){var i=re.invertObject(n);t.find("button").each((function(t,n){var o=e(n),r=i[o.data("event")];r&&o.attr("title",(function(e,t){return t+" ("+(n=r,ie.isMac&&(n=n.replace("CMD","").replace("SHIFT","")),n.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")+")");var n}))})).tooltip({container:"body",trigger:"hover",placement:o||"top"}).on("click",(function(){e(this).tooltip("hide")}))},b=function(t,n){var o=n.colors;t.find(".note-color-palette").each((function(){for(var t=e(this),n=t.attr("data-target-event"),i=[],r=0,a=o.length;r<a;r++){for(var s=o[r],l=[],d=0,c=s.length;d<c;d++){var u=s[d];l.push(['<button type="button" class="note-color-btn" style="background-color:',u,';" data-event="',n,'" data-value="',u,'" title="',u,'" data-toggle="button" tabindex="-1"></button>'].join(""))}i.push('<div class="note-color-row">'+l.join("")+"</div>")}t.html(i.join(""))}))};this.createLayoutByAirMode=function(t,n){var o=n.langInfo,i=n.keyMap[ie.isMac?"mac":"pc"],r=re.uniqueId();t.addClass("note-air-editor note-editable panel-body"),t.attr({id:"note-editor-"+r,contentEditable:!0});var a=document.body,d=e(s(o,n));d.addClass("note-air-layout"),d.attr("id","note-popover-"+r),d.appendTo(a),m(d,i),b(d,n);var c=e(l(n));c.addClass("note-air-layout"),c.attr("id","note-handle-"+r),c.appendTo(a);var u=e(g(o,n));u.addClass("note-air-layout"),u.attr("id","note-dialog-"+r),u.find("button.close, a.modal-close").click((function(){e(this).closest(".modal").modal("hide")})),u.appendTo(a)},this.createLayoutByFrame=function(t,n){var o=n.langInfo,i=e('<div class="note-editor panel panel-default" />');n.width&&i.width(n.width),n.height>0&&e('<div class="note-statusbar">'+(n.disableResizeEditor?"":'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>')+"</div>").prependTo(i);var r=e('<div class="note-editing-area" />'),d=!t.is(":disabled"),c=e('<div class="note-editable panel-body" contentEditable="'+d+'"></div>').prependTo(r);n.height&&c.height(n.height),n.direction&&c.attr("dir",n.direction);var u=t.attr("placeholder")||n.placeholder;u&&c.attr("data-placeholder",u),c.html(le.html(t)||le.emptyPara),e('<textarea class="note-codable"></textarea>').prependTo(r);var f=e(s(o,n)).prependTo(r);b(f,n),m(f,P),e(l(n)).prependTo(r),r.prependTo(i);for(var h=e('<div class="note-toolbar panel-heading" />'),p=0,v=n.toolbar.length;p<v;p++){for(var y=n.toolbar[p][0],C=n.toolbar[p][1],k=e('<div class="note-'+y+' btn-group" />'),x=0,w=C.length;x<w;x++){var T=a[C[x]];if(e.isFunction(T)){var N=e(T(o,n));N.attr("data-name",C[x]),k.append(N)}}h.append(k)}var P=n.keyMap[ie.isMac?"mac":"pc"];b(h,n),m(h,P,"bottom"),h.prependTo(i),e('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(i);var S=n.dialogsInBody?e(document.body):i;e(g(o,n)).prependTo(S).find("button.close, a.modal-close").click((function(){e(this).closest(".modal").modal("hide")})),i.insertAfter(t),t.hide()},this.hasNoteEditor=function(e){return this.noteEditorFromHolder(e).length>0},this.noteEditorFromHolder=function(t){return t.hasClass("note-air-editor")?t:t.next().hasClass("note-editor")?t.next():e()},this.createLayout=function(e,t){t.airMode?this.createLayoutByAirMode(e,t):this.createLayoutByFrame(e,t)},this.layoutInfoFromHolder=function(e){var t=this.noteEditorFromHolder(e);if(t.length)return t.data("holder",e),le.buildLayoutInfo(t)},this.removeLayout=function(e,t,n){n.airMode?(e.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),t.popover().remove(),t.handle().remove(),t.dialog().remove()):(e.html(t.editable().html()),n.dialogsInBody&&t.dialog().remove(),t.editor().remove(),e.show())},this.getTemplate=function(){return{button:t,iconButton:n,dialog:i}},this.addButtonInfo=function(e,t){a[e]=t},this.addDialogInfo=function(e,t){v[e]=t}},Me=new function(){var t=this,n=this.modules={editor:new be(this),toolbar:new Ce(this),statusbar:new ke(this),popover:new xe(this),handle:new we(this),fullscreen:new Te(this),codeview:new Ne(this),dragAndDrop:new Pe(this),clipboard:new Se(this),linkDialog:new Le(this),imageDialog:new Ee(this),helpDialog:new Fe(this)};this.invoke=function(){var e=ae.head(ae.from(arguments)),t=ae.tail(ae.from(arguments)),n=e.split("."),o=n.length>1,i=o&&ae.head(n),r=o?ae.last(n):ae.head(n),a=this.getModule(i),s=a[r];return s&&s.apply(a,t)},this.getModule=function(e){return this.modules[e]||this.modules.editor};var o=this.bindCustomEvent=function(e,t,n){return function(){var o=t[re.namespaceToCamel(n,"on")];return o&&o.apply(e[0],arguments),e.trigger("summernote."+n,arguments)}};this.insertImages=function(t,i){var r=t.editor(),a=t.editable(),s=t.holder(),l=a.data("callbacks"),d=r.data("options");l.onImageUpload?o(s,l,"image.upload")(i):e.each(i,(function(e,t){var i=t.name;d.maximumImageFileSize&&d.maximumImageFileSize<t.size?o(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError):ce.readFileAsDataURL(t).then((function(e){n.editor.insertImage(a,e,i)})).fail((function(){o(s,l,"image.upload.error")(d.langInfo.image.maximumFileSizeError)}))}))};var i={showLinkDialog:function(e){n.linkDialog.show(e)},showImageDialog:function(e){n.imageDialog.show(e)},showHelpDialog:function(e){n.helpDialog.show(e)},fullscreen:function(e){n.fullscreen.toggle(e)},codeview:function(e){n.codeview.toggle(e)}},r=function(e){le.isImg(e.target)&&e.preventDefault()},a=function(e){var t=le.makeLayoutInfo(e.currentTarget||e.target);n.editor.removeBogus(t.editable()),s(e)};this.updateStyleInfo=function(e,t){if(e){var o=t.editor().data("options").airMode;o||n.toolbar.update(t.toolbar(),e),n.popover.update(t.popover(),e,o),n.handle.update(t.handle(),e,o)}};var s=function(e){var o=e.target;setTimeout((function(){var e=le.makeLayoutInfo(o),i=n.editor.currentStyle(o);t.updateStyleInfo(i,e)}),0)},l=function(e){var t=le.makeLayoutInfo(e.currentTarget||e.target);n.popover.hide(t.popover()),n.handle.hide(t.handle())},d=function(t){e(t.target).closest("[data-event]").length&&t.preventDefault()},c=function(t){var o=e(t.target).closest("[data-event]");if(o.length){var r,a=o.attr("data-event"),l=o.attr("data-value"),d=o.attr("data-hide"),c=le.makeLayoutInfo(t.target);if(-1!==e.inArray(a,["resize","floatMe","removeMedia","imageShape"])){var u=c.handle().find(".note-control-selection");r=e(u.data("target"))}if(d&&o.parents(".popover").hide(),e.isFunction(e.summernote.pluginEvents[a]))e.summernote.pluginEvents[a](t,n.editor,c,l);else if(n.editor[a]){var f=c.editable();f.focus(),n.editor[a](f,l,r),t.preventDefault()}else i[a]&&(i[a].call(this,c),t.preventDefault());if(-1!==e.inArray(a,["backColor","foreColor"])){var h=c.editor().data("options",h);(h.airMode?n.popover:n.toolbar).updateRecentColor(ae.head(o),a,l)}s(t)}};this.bindKeyMap=function(t,o){var r=t.editor(),a=t.editable();a.on("keydown",(function(s){var l=[];s.metaKey&&l.push("CMD"),s.ctrlKey&&!s.altKey&&l.push("CTRL"),s.shiftKey&&l.push("SHIFT");var d,c=ue.nameFromCode[s.keyCode];c&&l.push(c);var u=l.join("+"),f=o[u];if(f){if(d=e.summernote.pluginEvents[u],e.isFunction(d)&&d(s,n.editor,t))return!1;d=e.summernote.pluginEvents[f],e.isFunction(d)?d(s,n.editor,t):n.editor[f]?(n.editor[f](a,r.data("options")),s.preventDefault()):i[f]&&(i[f].call(this,t),s.preventDefault())}else ue.isEdit(s.keyCode)&&n.editor.afterCommand(a)}))},this.attach=function(t,o){o.shortcuts&&this.bindKeyMap(t,o.keyMap[ie.isMac?"mac":"pc"]),t.editable().on("mousedown",r),t.editable().on("keyup mouseup",a),t.editable().on("scroll",l),n.clipboard.attach(t,o),n.handle.attach(t,o),t.popover().on("click",c),t.popover().on("mousedown",d),n.dragAndDrop.attach(t,o),o.airMode||(t.toolbar().on("click",c),t.toolbar().on("mousedown",d),n.statusbar.attach(t,o)),(o.airMode?t.popover():t.toolbar()).find(".note-dimension-picker-mousecatcher").css({width:o.insertTableMaxSize.col+"em",height:o.insertTableMaxSize.row+"em"}).on("mousemove",(function(t){!function(t,n){var o,i=e(t.target.parentNode),r=i.next(),a=i.find(".note-dimension-picker-mousecatcher"),s=i.find(".note-dimension-picker-highlighted"),l=i.find(".note-dimension-picker-unhighlighted");if(void 0===t.offsetX){var d=e(t.target).offset();o={x:t.pageX-d.left,y:t.pageY-d.top}}else o={x:t.offsetX,y:t.offsetY};var c=Math.ceil(o.x/18)||1,u=Math.ceil(o.y/18)||1;s.css({width:c+"em",height:u+"em"}),a.attr("data-value",c+"x"+u),3<c&&c<n.insertTableMaxSize.col&&l.css({width:c+1+"em"}),3<u&&u<n.insertTableMaxSize.row&&l.css({height:u+1+"em"}),r.html(c+" x "+u)}(t,o)})),t.editor().data("options",o),ie.isMSIE||setTimeout((function(){document.execCommand("styleWithCSS",0,o.styleWithSpan)}),0);var i=new fe(t.editable());t.editable().data("NoteHistory",i),t.editable().data("callbacks",{onInit:o.onInit,onFocus:o.onFocus,onBlur:o.onBlur,onKeydown:o.onKeydown,onKeyup:o.onKeyup,onMousedown:o.onMousedown,onEnter:o.onEnter,onPaste:o.onPaste,onBeforeCommand:o.onBeforeCommand,onChange:o.onChange,onImageUpload:o.onImageUpload,onImageUploadError:o.onImageUploadError,onMediaDelete:o.onMediaDelete,onToolbarClick:o.onToolbarClick});var s=n.editor.styleFromNode(t.editable());this.updateStyleInfo(s,t)},this.attachCustomEvent=function(t,n){var i=t.holder(),r=t.editable(),a=r.data("callbacks");r.focus(o(i,a,"focus")),r.blur(o(i,a,"blur")),r.keydown((function(e){e.keyCode===ue.code.ENTER&&o(i,a,"enter").call(this,e),o(i,a,"keydown").call(this,e)})),r.keyup(o(i,a,"keyup")),r.on("mousedown",o(i,a,"mousedown")),r.on("mouseup",o(i,a,"mouseup")),r.on("scroll",o(i,a,"scroll")),r.on("paste",o(i,a,"paste"));var s=ie.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";r.on(s,(function(){o(i,a,"change")(r.html(),r)})),n.airMode||(t.toolbar().click(o(i,a,"toolbar.click")),t.popover().click(o(i,a,"popover.click"))),le.isTextarea(ae.head(i))&&i.closest("form").submit((function(e){t.holder().val(t.holder().code()),o(i,a,"submit").call(this,e,i.code())})),le.isTextarea(ae.head(i))&&n.textareaAutoSync&&i.on("summernote.change",(function(){t.holder().val(t.holder().code())})),o(i,a,"init")(t);for(var l=0,d=e.summernote.plugins.length;l<d;l++)e.isFunction(e.summernote.plugins[l].init)&&e.summernote.plugins[l].init(t)},this.detach=function(e,t){e.holder().off(),e.editable().off(),e.popover().off(),e.handle().off(),e.dialog().off(),t.airMode||(e.dropzone().off(),e.toolbar().off(),e.statusbar().off())}};e.extend(e.summernote,{renderer:Ie,eventHandler:Me,core:{agent:ie,list:ae,dom:le,range:de},pluginEvents:{},plugins:[]}),e.summernote.addPlugin=function(t){e.summernote.plugins.push(t),t.buttons&&e.each(t.buttons,(function(e,t){Ie.addButtonInfo(e,t)})),t.dialogs&&e.each(t.dialogs,(function(e,t){Ie.addDialogInfo(e,t)})),t.events&&e.each(t.events,(function(t,n){e.summernote.pluginEvents[t]=n})),t.langs&&e.each(t.langs,(function(t,n){e.summernote.lang[t]&&e.extend(e.summernote.lang[t],n)})),t.options&&e.extend(e.summernote.options,t.options)},e.fn.extend({summernote:function(){var t=e.type(ae.head(arguments)),n="string"===t,o="object"===t,i=o?ae.head(arguments):{};if((i=e.extend({},e.summernote.options,i)).icons=e.extend({},e.summernote.options.icons,i.icons),i.langInfo=e.extend(!0,{},e.summernote.lang["en-US"],e.summernote.lang[i.lang]),!n&&o)for(var r=0,a=e.summernote.plugins.length;r<a;r++){var s=e.summernote.plugins[r];i.plugin[s.name]&&(e.summernote.plugins[r]=e.extend(!0,s,i.plugin[s.name]))}this.each((function(t,n){var o=e(n);if(!Ie.hasNoteEditor(o)){Ie.createLayout(o,i);var r=Ie.layoutInfoFromHolder(o);o.data("layoutInfo",r),Me.attach(r,i),Me.attachCustomEvent(r,i)}}));var l=this.first();if(l.length){var d=Ie.layoutInfoFromHolder(l);if(n){var c=ae.head(ae.from(arguments)),u=ae.tail(ae.from(arguments)),f=[c,d.editable()].concat(u);return Me.invoke.apply(Me,f)}i.focus&&d.editable().focus()}return this},code:function(t){if(void 0===t){var n=this.first();if(!n.length)return;var o=Ie.layoutInfoFromHolder(n),i=o&&o.editable();if(i&&i.length){var r=Me.invoke("codeview.isActivated",o);return Me.invoke("codeview.sync",o),r?o.codable().val():o.editable().html()}return le.value(n)}return this.each((function(n,o){var i=Ie.layoutInfoFromHolder(e(o)),r=i&&i.editable();r&&r.html(t)})),this},destroy:function(){return this.each((function(t,n){var o=e(n);if(Ie.hasNoteEditor(o)){var i=Ie.layoutInfoFromHolder(o),r=i.editor().data("options");Me.detach(i,r),Ie.removeLayout(o,i,r)}})),this}})}));